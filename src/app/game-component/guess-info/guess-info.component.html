<div class="d-flex border rounded">
  <!-- img -->
  <div class="col-2 p-2">
    <img class="img" [class.placeholder-img]="shouldShowPlaceholderImage()" [src]="cardImg()">
  </div>
  <div class="col-6 d-flex flex-column">
    <!-- name -->
    @let name = getName(correctCard());
    @let hasNameValue = hasValue("name");
    <div class="fw-bold">
      @if (hasNameValue) {
        <span class="value correct"
              [class.filter]="hasFilter('name')"
              (click)="setFilter('name')">{{ name }}</span>
      } @else {
        @let hasFirst = hasFirstLetter();
        @if (hasFirst) {
          <span class="value partial"
                [class.filter]="hasFilter('firstLetter')"
                (click)="setFilterCustom('firstLetter', name[0])">{{ name[0] }}</span>
        }
        @for (part of guessNameParts(); track $index + part) {
          <span [class.ms-n1]="$first && hasFirst">
            @if ($first && hasFirst) {
              {{ part.slice(1) }}
            } @else {
              {{ part }}
            }
          </span>
        }
      }
    </div>
    <!-- cost -->
    <div>
      @let hasCostValue = hasValue("cost");
      <span class="value"
            [class.correct]="hasCostValue"
            [class.filter]="hasFilter('cost')"
            (click)="setFilter('cost')">{{ hasCostValue ? getCost(correctCard()) : PLACEHOLDER }}</span>
      <span class="text-muted"> Cost</span>
    </div>
    <!-- type -->
    <div>
      @let hasTypeValue = hasValue("type");
      <span class="value"
            [class.correct]="hasTypeValue"
            [class.filter]="hasFilter('type')"
            (click)="setFilter('type')">{{ hasTypeValue ? getType(correctCard().type) : PLACEHOLDER }}</span>
      <span class="text-muted"> Type</span>
    </div>
    <!-- faction/aspect -->
    <div>
      @let hasFactionValue = hasValue("faction");
      <span class="value"
            [class.correct]="hasFactionValue"
            [class.filter]="hasFilter('faction')"
            (click)="setFilter('faction')">{{ hasFactionValue ? getFaction(correctCard().faction) : PLACEHOLDER }}</span>
      <span class="text-muted"> Aspect</span>
    </div>
  </div>
  <div class="col">
    <div>
      <!-- year -->
      @let hasYearValue = hasValue("year");
      <span class="value"
                   [class.correct]="hasYearValue"
                   [class.filter]="hasFilter('year')"
                   (click)="setFilter('year')">{{hasYearValue ? correctCard().year : PLACEHOLDER}}</span>
      <span class="text-muted"> Year</span>
    </div>
    <div>
      @let resourcesComplete = hasAllResources();
      <span class="value fw-bold"
            [class.partial]="hasAnyResource()"
            [class.correct]="resourcesComplete"
            [class.filter]="hasFilter('allResources') || hasFilter('anyResource')"
            (click)="setFilterCustom(resourcesComplete ? 'allResources' : 'anyResource')">Resources </span>
      @for (resource of correctCard().resources; track $index) {
        @let hasValue = hasResource(resource);
        <span class="{{hasValue ? `resource ${resource}` : ''}}"
              [class.filter]="hasFilter('resources', resource)"
              (click)="setFilterArray('resources', resource)">{{ hasValue ? resource.toUpperCase() : PLACEHOLDER[0] }}</span>
      }
    </div>
    <div class="packs">
      @let packsComplete = hasAllPacks();
      <span class="value fw-bold"
            [class.correct]="packsComplete"
            [class.filter]="hasFilter('allPacks')"
            (click)="setFilterCustom('allPacks')">Packs </span>
      @for (pack of correctCard().packs; track pack) {
        <span class="value"
              [class.correct]="packsComplete"
              [class.filter]="hasFilter('packs', pack)"
              (click)="setFilterArray('packs', pack)">{{ packsComplete ? getPack(pack) : PLACEHOLDER }}</span>
      }
    </div>
    <div class="traits">
      @let traitsComplete = hasAllTraits();
      <span class="value fw-bold"
            [class.partial]="hasAnyTrait()"
            [class.correct]="traitsComplete"
            [class.filter]="hasFilter('allTraits') || hasFilter('anyTrait')"
            (click)="setFilterCustom(traitsComplete ? 'allTraits' : 'anyTrait')">Traits </span>
      @for (trait of correctCard().traits; track trait) {
        @let hasValue = hasTrait(trait);
        <span class="value"
              [class.correct]="hasValue"
              [class.filter]="hasFilter('traits', trait)"
              (click)="setFilterArray('traits', trait)">{{ hasValue ? trait : PLACEHOLDER }}</span>
      }
    </div>
  </div>
</div>

